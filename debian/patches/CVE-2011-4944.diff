Origin: backport, http://hg.python.org/cpython/rev/f833e7ec4de1/
Description: Create ~/.pypirc securely (#13512)

diff -Naur python2.6-2.6.7/Lib/distutils/config.py python2.6-2.6.7.new/Lib/distutils/config.py
--- python2.6-2.6.7/Lib/distutils/config.py	2008-12-27 07:28:42.000000000 -0600
+++ python2.6-2.6.7.new/Lib/distutils/config.py	2012-09-27 16:39:27.000000000 -0500
@@ -43,7 +43,7 @@
     def _store_pypirc(self, username, password):
         """Creates a default .pypirc file."""
         rc = self._get_rc_file()
-        f = open(rc, 'w')
+        f = os.fdopen(os.open(rc, os.O_CREAT | os.O_WRONLY, 0600), 'w')
         try:
             f.write(DEFAULT_PYPIRC % (username, password))
         finally:
